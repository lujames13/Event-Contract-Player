# Project Progress

> â˜… **Single Source of Truth** â€” Agent æ¯æ¬¡å®Œæˆä»»å‹™å¾Œå¿…é ˆæ›´æ–°æ­¤æ–‡ä»¶ã€‚
>
> ğŸ“ **è¨­è¨ˆåŸå‰‡ (2026-02-15 ä¿®è¨‚)ï¼š**
> 1. **Gate-based æ¨é€²**ï¼šæ¯å€‹ Gate æ˜¯æ˜ç¢ºçš„ pass/fail åˆ¤æ–·é»ï¼Œä¸é€šéå°±åœ¨ç•¶å‰å±¤è¿­ä»£ã€‚
> 2. **æ¨¡å‹å¯¦é©—å…ˆè¡Œ**ï¼šåœ¨ç¾æœ‰ Binance OHLCV æ•¸æ“šä¸Šçª®ç›¡ç­–ç•¥è®Šé«”ï¼Œä¸æ€¥æ–¼æ¥å…¥æ–°æ•¸æ“šæºã€‚
> 3. **æ‰¹é‡æ¯”è¼ƒå¾Œå† live**ï¼šç´¯ç©è¶³å¤ å¤šçš„å€™é¸ç­–ç•¥å›æ¸¬æ•¸æ“šå¾Œï¼Œä¸€æ¬¡æ€§é€²å…¥ live é©—è­‰ã€‚
> 4. **æ¨¡å‹è¿­ä»£ç¨ç«‹è¿½è¹¤**ï¼šè©³è¦‹ `docs/MODEL_ITERATIONS.md`ã€‚

---

## Gate Status Dashboard

| Gate | åç¨± | ç‹€æ…‹ | é€šéæ¢ä»¶ | å‚™è¨» |
|------|------|------|---------|------|
| **0** | åŸºç¤è¨­æ–½å°±ç·’ | âœ… **PASSED** | è³‡æ–™ç®¡é“ + å›æ¸¬å¼•æ“ + é¢¨æ§ + CLI å¯é‹è¡Œ | 2026-02-14 |
| **1** | æ¨¡å‹å¯¦é©—æ± æˆç†Ÿ | ğŸ”„ **ACTIVE** | è¦‹ä¸‹æ–¹ Gate 1 ç´°å‰‡ | XGBoost baseline DA ~51%ï¼Œé ä½æ–¼ breakeven |
| **2** | Live ç³»çµ± + å¤šæ¨¡å‹åŒæ­¥é©—è­‰ | â³ BLOCKED | Gate 1 é€šé | â€” |
| **3** | æ¨¡æ“¬äº¤æ˜“çµ±è¨ˆé¡¯è‘— | â³ BLOCKED | Gate 2 é€šé | â€” |
| **4** | çœŸå¯¦äº¤æ˜“é©—è­‰ | â³ BLOCKED | Gate 3 é€šé | â€” |

---

## Gate 1ï¼šæ¨¡å‹å¯¦é©—æ± æˆç†Ÿï¼ˆç•¶å‰ç„¦é»ï¼‰

**é€šéæ¢ä»¶ï¼ˆå…¨éƒ¨æ»¿è¶³ï¼‰ï¼š**
- [ ] â‰¥3 å€‹å·®ç•°åŒ–ç­–ç•¥æ¶æ§‹ï¼ˆä¾‹ï¼štree-based / neural / ensembleï¼‰æœ‰å®Œæ•´å›æ¸¬æ•¸æ“š
- [ ] æ¯å€‹ç­–ç•¥è¦†è“‹ 4 å€‹ timeframeï¼ˆ10m / 30m / 60m / 1440mï¼‰
- [ ] è‡³å°‘ 1 å€‹ã€Œç­–ç•¥ Ã— timeframeã€çµ„åˆ OOS DA > breakevenï¼ˆ10m: 55.56%, å…¶é¤˜: 54.05%ï¼‰
- [ ] è©²çµ„åˆçš„ä¿¡å¿ƒåº¦æ ¡æº–ä¸åè½‰ï¼ˆé«˜ confidence bucket å‹ç‡ â‰¥ ä½ confidence bucketï¼‰

**æ•¸æ“šæºé™åˆ¶ï¼š** åƒ…ä½¿ç”¨ Binance OHLCVï¼ˆå·²æ¥å…¥ï¼‰ã€‚å¤šæ¨¡æ…‹ç‰¹å¾µï¼ˆF&G, DXY, CryptoBERTï¼‰æ¨é²åˆ° Gate 1 é€šéå¾Œè€ƒæ…®ã€‚

**å·¥ä½œæ–¹å¼ï¼š** Coding agent ä¾ç…§ `docs/MODEL_ITERATIONS.md` è‡ªä¸»è¿­ä»£ã€‚æ¶æ§‹å¸«å®šæœŸ review å¯¦é©—è¨˜éŒ„ã€‚

**ç­–ç•¥æ¶æ§‹åˆ†é¡ï¼š**

| é¡åˆ¥ | å€™é¸æ¨¡å‹ | ç‹€æ…‹ |
|------|---------|------|
| A. Tree-based | XGBoost, LightGBM, CatBoost | XGBoost baseline å·²å®Œæˆï¼ˆDA 50.8%ï¼‰ |
| B. Neural | MLP, N-BEATS | æœªé–‹å§‹ |
| C. Ensemble / Stacking | A+B çš„çµ„åˆ | ä¾è³´ A, B å…ˆæœ‰å¯ç”¨æ¨¡å‹ |

**æœ€æ–°å›æ¸¬çµæœæ‘˜è¦**ï¼ˆå®Œæ•´è¨˜éŒ„è¦‹ `docs/MODEL_ITERATIONS.md`ï¼‰ï¼š

| 001 | xgboost_v1 | 10m | 51.17% | -0.08 | 57457 | âš ï¸ åœæ»¯ | 2026-02-15 |
| 002 | **xgboost_v2**| 10m | **55.59%** | -0.02 | 662 | âŒ åè½‰ | 2026-02-15 |
| 004 | **lgbm_v1**   | 30m | **54.34%** | 0.01 | 530 | âŒ åè½‰ | 2026-02-15 |
| 004 | **lgbm_v1**   | 60m | **54.46%** | 0.01 | 101 | âš ï¸ æ¨£æœ¬å°‘ | 2026-02-15 |
| 002 | xgboost_v2 | 30m | 49.89% | -0.09 | 463 | âš ï¸ åœæ»¯ | 2026-02-15 |
| 002 | xgboost_v2 | 60m | 51.72% | -0.05 | 203 | âš ï¸ åœæ»¯ | 2026-02-15 |
| 005 | lgbm_v2    | (all) | RUNNING| â€” | â€” | â€” | ç‰¹å¾µç¯©é¸ + æ ¡æº– |

---

## Gate 1 ä»»å‹™æ¸…å–®

- [x] **1.1.1** è£œå…¨ `xgboost_v1` å…¨æ™‚æ®µ Baseline (Done)
- [x] **1.1.2** ä½¿ç”¨æ“´å……æ•¸æ“šé‡è·‘ `xgboost_v2` (Done, 10m é”æ¨™)
- [ğŸ”„] **1.1.3** è‡ªä¸»è¿­ä»£å„ªåŒ– (æ­£åœ¨é€²è¡Œï¼š`lgbm_v2` ç‰¹å¾µç¯©é¸ & Isotonic æ ¡æº–)
- [ ] **1.1.4** ä¿¡å¿ƒåº¦æ ¡æº–é©—è­‰ (ç­‰ `lgbm_v2` çµæœ)
- [x] **1.1.5** å®Œæˆ Data Starvation ä¿®å¾© (å·²æŠ“å– 2023-01-01 èµ·è³‡æ–™)

---

## Gate 2ï¼šLive ç³»çµ± + å¤šæ¨¡å‹åŒæ­¥é©—è­‰

> **å‰æï¼šGate 1 é€šéã€‚**

**é€šéæ¢ä»¶ï¼š**
- [ ] æ‰€æœ‰ Gate 1 å€™é¸ç­–ç•¥åŒæ™‚åœ¨ live ç’°å¢ƒé‹è¡Œ
- [ ] Discord Bot äº’å‹•åŠŸèƒ½å°±ç·’ï¼ˆè©³è¦‹ä¸‹æ–¹ä»»å‹™ï¼‰
- [ ] 72 å°æ™‚ç©©å®šé‹è¡Œç„¡å´©æ½°

**ä»»å‹™æ¸…å–®ï¼š**

### 2.1 Live é‹è¡Œæ¡†æ¶å‡ç´š

- [ ] **2.1.1** å¤šæ¨¡å‹åŒæ™‚è¼‰å…¥èˆ‡ç®¡ç†
  - `run_live.py` æ”¯æ´å¾ `models/` ç›®éŒ„è‡ªå‹•æƒæä¸¦è¼‰å…¥æ‰€æœ‰å¯ç”¨ç­–ç•¥
  - æ¯å€‹ç­–ç•¥ç¨ç«‹ç”¢ç”Ÿ PredictionSignalï¼Œå…±ç”¨ data pipeline
  - ç­–ç•¥ registryï¼šå‹•æ…‹è¨»å†Šï¼Œæ–°æ¨¡å‹æ”¾é€²ç›®éŒ„å³å¯è¢«è¼‰å…¥

- [ ] **2.1.2** Live æ¨¡æ“¬äº¤æ˜“è¨˜éŒ„
  - æ¯å€‹ç­–ç•¥çš„æ¯å€‹ timeframe ç¨ç«‹è¨˜éŒ„ SimulatedTrade
  - SQLite ä¸­æŒ‰ strategy_name å€åˆ†
  - æ”¯æ´å›æº¯æŸ¥è©¢æ¯å€‹ç­–ç•¥çš„æ­·å²è¡¨ç¾

### 2.2 Discord Bot äº’å‹•åŠŸèƒ½

- [ ] **2.2.1** `/predict [timeframe]` æŒ‡ä»¤
  - ç”¨ç•¶å‰å¸‚å ´æ•¸æ“šï¼Œè·‘æ‰€æœ‰å·²è¼‰å…¥æ¨¡å‹
  - å›å‚³æ¯å€‹æ¨¡å‹çš„é æ¸¬æ–¹å‘ + confidence
  - æ ¼å¼åŒ–ç‚º embed è¨Šæ¯ï¼Œç›´è§€é¡¯ç¤º

- [ ] **2.2.2** `/stats [model_name]` æŒ‡ä»¤å‡ç´š
  - ä¸æŒ‡å®š model_name â†’ é¡¯ç¤ºæ‰€æœ‰æ¨¡å‹çš„æ‘˜è¦å°æ¯”è¡¨
  - æŒ‡å®š model_name â†’ é¡¯ç¤ºè©²æ¨¡å‹çš„è©³ç´°çµ±è¨ˆï¼ˆDAã€PnLã€æ ¡æº–ã€drawdownï¼‰
  - æ”¯æ´æŒ‰ timeframe ç¯©é¸

- [ ] **2.2.3** `/models` æŒ‡ä»¤
  - åˆ—å‡ºæ‰€æœ‰å·²è¼‰å…¥æ¨¡å‹
  - é¡¯ç¤ºæ¯å€‹æ¨¡å‹çš„å›æ¸¬è¡¨ç¾æ‘˜è¦ + live é‹è¡Œç‹€æ…‹

- [ ] **2.2.4** è‡ªå‹•é€šçŸ¥ç³»çµ±
  - ç•¶ä»»ä½•ç­–ç•¥ confidence > threshold æ™‚ï¼Œè‡ªå‹•ç™¼é€ã€Œæº–å‚™ä¸‹å–®ã€é€šçŸ¥
  - åŒ…å«ï¼šç­–ç•¥åç¨±ã€æ–¹å‘ã€confidenceã€timeframeã€ç•¶å‰åƒ¹æ ¼
  - åˆ°æœŸæ™‚è‡ªå‹•ç™¼é€çµæœé€šçŸ¥ï¼šæ˜¯å¦ç²å‹ + PnL

### 2.3 ç³»çµ±ç©©å®šæ€§

- [ ] **2.3.1** WebSocket æ–·ç·šè‡ªå‹•é‡é€£ï¼ˆå«æŒ‡æ•¸é€€é¿ï¼‰
- [ ] **2.3.2** éŒ¯èª¤éš”é›¢ï¼šå–®ä¸€ç­–ç•¥ exception ä¸å½±éŸ¿å…¶ä»–ç­–ç•¥é‹è¡Œ
- [ ] **2.3.3** å¥åº·æª¢æŸ¥ endpoint æˆ– Discord `/health` æŒ‡ä»¤

---

## Gate 3ï¼šæ¨¡æ“¬äº¤æ˜“çµ±è¨ˆé¡¯è‘—

> **å‰æï¼šGate 2 é€šéã€‚**

**é€šéæ¢ä»¶ï¼š**
- [ ] æ¯å€‹å€™é¸ç­–ç•¥ Ã— timeframe â‰¥ 200 ç­† live æ¨¡æ“¬äº¤æ˜“
- [ ] Live DA èˆ‡å›æ¸¬ DA çš„å·®è· < 5%ï¼ˆç¢ºèªå›æ¸¬ä¸æ˜¯éæ“¬åˆï¼‰
- [ ] è‡³å°‘ 1 å€‹çµ„åˆ live DA > breakeven + 5% å®‰å…¨é‚Šéš›

---

## Gate 4ï¼šçœŸå¯¦äº¤æ˜“é©—è­‰

> **å‰æï¼šGate 3 é€šéã€‚**

**ä»»å‹™æ¸…å–®ï¼š**
- [ ] **4.1** Discord Bot å¢åŠ çœŸå¯¦äº¤æ˜“è¨˜éŒ„åŠŸèƒ½
- [ ] **4.2** RealTrade è¨˜éŒ„ + æ»‘åƒ¹åˆ†æ
- [ ] **4.3** ç´¯ç© â‰¥ 50 ç­†çœŸå¯¦äº¤æ˜“
- [ ] **4.4** çœŸå¯¦ vs æ¨¡æ“¬å‹ç‡å°æ¯”å ±å‘Š

---

## å·²å®Œæˆé …ç›®ï¼ˆCompleted Archiveï¼‰

### Gate 0: åŸºç¤è¨­æ–½ï¼ˆ2026-02-12 ~ 2026-02-14ï¼‰

**ç’°å¢ƒå»ºè¨­**
- [x] `uv init` åˆå§‹åŒ–å°ˆæ¡ˆ + ç›®éŒ„çµæ§‹ + `project_constants.yaml` (2026-02-12)
- [x] Binance REST API æ­·å²æ•¸æ“šæŠ“å– (2026-02-12)
  - ç”¢å‡ºï¼š`scripts/fetch_history.py`, `src/btc_predictor/data/store.py`
- [x] SQLite schema å»ºç«‹ + è®€å¯«å·¥å…· (2026-02-12)
  - ç”¢å‡ºï¼š`src/btc_predictor/data/store.py`, `tests/test_store.py`

**æ ¸å¿ƒæ¨¡çµ„**
- [x] Event Contract label ç”Ÿæˆé‚è¼¯ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/data/labeling.py`
  - å¹³ç›¤ (close == open) è¦–ç‚º lose
- [x] ç‰¹å¾µå·¥ç¨‹ï¼šOHLCV + æŠ€è¡“æŒ‡æ¨™ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/strategies/xgboost_direction/features.py`
  - ç‰¹å¾µï¼šreturns, volatility, RSI, MACD, BB, ATR, æ™‚é–“ç·¨ç¢¼, æˆäº¤é‡
- [x] XGBoost æ¨¡å‹è¨“ç·´é‚è¼¯ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/strategies/xgboost_direction/model.py`
- [x] BaseStrategy ä»‹é¢ + PredictionSignal è¼¸å‡º (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/strategies/base.py`, `src/btc_predictor/models.py`
  - å« `fit()` å’Œ `predict()` æŠ½è±¡æ–¹æ³•

**å›æ¸¬ & é¢¨æ§**
- [x] é¢¨æ§æ ¸å¿ƒé‚è¼¯ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/simulation/risk.py`
  - should_trade + calculate_betï¼Œå¾ project_constants.yaml è®€å–
- [x] Walk-forward å›æ¸¬å¼•æ“ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/backtest/engine.py`
- [x] å›æ¸¬çµ±è¨ˆè¨ˆç®— (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/backtest/stats.py`
- [x] å›æ¸¬ CLI å…¥å£ + å ±å‘Šç”Ÿæˆ (2026-02-14)
  - ç”¢å‡ºï¼š`scripts/backtest.py`, `reports/`
- [x] æ¨¡å‹è¨“ç·´è…³æœ¬ (2026-02-14)
  - ç”¢å‡ºï¼š`scripts/train_xgboost_model.py`

**å³æ™‚ç³»çµ±éª¨æ¶**
- [x] WebSocket å³æ™‚æ•¸æ“šç®¡é“ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/data/pipeline.py`
- [x] Discord Bot åŸºç¤æ¶æ§‹ (2026-02-14)
  - ç”¢å‡ºï¼š`src/btc_predictor/discord_bot/bot.py`
- [x] å³æ™‚é‹è¡Œå…¥å£ (2026-02-14)
  - ç”¢å‡ºï¼š`scripts/run_live.py`

---

## Known Issues / Discussion

- âš ï¸ **ä¿¡å¿ƒåº¦æ ¡æº–åè½‰**ï¼šXGBoost baseline çš„ confidence 0.9+ å‹ç‡åƒ… 38.7%ï¼Œæ¯” 0.6-0.7 çš„ 52.9% é‚„ä½ã€‚
  é«˜ confidence åè€Œæ˜¯åå‘æŒ‡æ¨™ã€‚éœ€è¦åœ¨ MODEL_ITERATIONS ä¸­å„ªå…ˆè§£æ±ºã€‚
- âš ï¸ **Event Contract open price æ–°è¦å‰‡ (2026-01-28)**ï¼šopen price ç¾åœ¨æ˜¯ä¸‹å–®å¾Œã€Œä¸‹ä¸€ç§’ã€çš„ index priceã€‚
  æ¨¡æ“¬æ™‚å­˜åœ¨ç³»çµ±æ€§åå·®ï¼Œéœ€åœ¨ Gate 4 çœŸå¯¦äº¤æ˜“ä¸­è¿½è¹¤ã€‚
- âš ï¸ **1440m (1d) timeframe æœªè¨“ç·´**ï¼šç›®å‰åªæœ‰ 10m/30m/60m æ¨¡å‹ï¼Œ1d å¾…è£œã€‚
- â“ **backtest engine ä¸­ `lower` æ–¹å‘çš„å‹è² åˆ¤å®š**ï¼šç›®å‰ `is_win = close_price <= open_price`ï¼Œ
  ä½† Event Contract è¦å‰‡ä¸­å¹³ç›¤å° lower åŒæ¨£æ˜¯ loseã€‚æ‡‰æ”¹ç‚º `is_win = close_price < open_price`ã€‚
  éœ€ç¢ºèªä¸¦ä¿®æ­£ã€‚